# AutoClicker for macOS - 功能规范

> 📁 本文件遵循 docs/ENVIRONMENT_CONFIG.md 中的规范
> 📅 最後修改時間：2025-05-04 00:06

<!-- DO NOT MODIFY: This file defines critical rules for AI behavior, project architecture, and acceptance testing. -->

# AutoClicker for macOS - 功能规格说明书

## 🎯 产品目标

这是一个基于 Swift 和 SwiftUI 构建的 macOS 图形界面自动化辅助工具，主要功能包括：
- 鼠标与键盘操作的录制与回放
- 屏幕图像识别并自动点击
- 多图像依序识别、配置化控制
- 快捷键触发、脚本导出与管理
- 可上架至 Mac App Store，满足隐私权限与 UI 设计规范

适用于游戏挂机、重复办公流程自动化、UI 自动测试等场景。

## 🧑‍💻 使用流程

### 1. 录制与回放模式
1. 启动应用，主界面显示控制按钮与脚本列表
2. 点击"开始录制"按钮或自定义快捷键（默认：⌘+R）
3. 系统捕获所有鼠标移动、点击、键盘事件
4. 点击"停止录制"按钮或快捷键（默认：⌘+S）
5. 用户进入编辑器可插入/调整延迟、重复、顺序等属性
6. 可设置是否循环、播放速度、间隔抖动
7. 点击"播放"按钮（或快捷键 ⌘+P）开始执行
8. 可中途暂停/停止

### 2. 图像识别模式
1. 用户点击"图像识别"模块
2. 点击"截取目标图像"按钮后框选屏幕区域，生成识别模板
3. 可添加多个图像，按顺序逐一检测
4. 设置匹配间隔（例如每 500ms 识别一次）
5. 每当识别命中图像时，自动点击其中心点
6. 图像识别与脚本执行可同时进行，无需互斥

## ⚙️ 核心功能细节

### 1. 本地存储
- **脚本存储**
  - 路径：`~/Library/Application Support/AutoClicker/scripts/`
  - 格式：JSON
  - 功能：支持导入、导出、置换

- **图像存储**
  - 路径：`~/Library/Application Support/AutoClicker/images/`
  - 格式：PNG
  - 功能：支持导入、导出、置换

### 2. 快捷键配置
| 操作 | 默认快捷键 | 说明 |
|------|------------|------|
| 开始录制 | ⌘+R | 可在设置中自定义 |
| 停止录制 | ⌘+S | - |
| 播放脚本 | ⌘+P | 支持循环播放 |
| 停止播放 | ⌘+E | - |
| 开启图像识别播放 | ⌘+I | 多图识别任务将顺序执行 |

### 3. 并行执行机制
- **图像识别与脚本并行**
  - 图像识别功能与脚本播放可并行执行
  - 回放脚本时，识别系统继续工作并点击命中的图像
  - 多图像识别依序执行，可配置间隔（如：500ms）

## 📐 UI 模块设计

### 1. 主界面
- 功能按钮
- 快捷键预览
- 脚本列表

### 2. 编辑器
- 录制动作表格
- 时序调整
- 动作类型修改

### 3. 图像识别器
- 图像列表
- 间隔配置
- 点击规则

### 4. 设置中心
- 快捷键绑定
- 脚本存储路径
- 本地化语言

### 5. 日志输出
- 执行状态
- 识别反馈
- 错误记录

## ✅ 上架与隐私说明

### 1. 权限要求
- 使用 macOS "辅助功能权限" 执行鼠标和键盘模拟
- 图像模板仅本地保存，不上传任何信息

### 2. 设计规范
- 遵循 Apple Human Interface Guidelines
- 支持中英文本地化
- 兼容深色模式

### 3. 隐私保护
- 所有数据无外部传输行为
- 满足 App Store 审核隐私要求

## 🧪 后续扩展计划

### 1. 功能扩展
- 条件逻辑控制（如"如果识别图A，则跳过后续3步"）
- 操作热区可视化拖拽标记
- 自动更新版本管理
- 脚本云同步（需额外隐私声明）

### 2. 性能优化
- 图像识别算法优化
- 录制延迟优化
- 内存使用优化

### 3. 用户体验
- 更多快捷键自定义选项
- 更丰富的脚本编辑功能
- 更直观的操作界面

# 項目規格說明

## 功能規格
1. 圖像識別
   - 支持模板匹配
   - 支持特徵匹配
   - 支持深度學習
   - 支持多點識別

2. 自動點擊
   - 支持單點點擊
   - 支持多點點擊
   - 支持點擊序列
   - 支持延時控制

3. 快捷鍵
   - 支持全局快捷鍵
   - 支持快捷鍵配置
   - 支持快捷鍵提示
   - 支持衝突檢測

## 技術規格
1. 開發環境
   - macOS 13.0+
   - Xcode 15.0+
   - Swift 5.9+
   - SwiftUI 4.0+

2. 系統要求
   - macOS 13.0+
   - 4GB RAM
   - 500MB 存儲
   - Intel/Apple Silicon

3. 依賴庫
   - Vision
   - CoreML
   - CoreGraphics
   - SwiftUI

## 性能規格
1. 響應時間
   - 啟動時間 < 2s
   - 識別時間 < 100ms
   - 點擊延遲 < 50ms
   - UI 響應 < 16ms

2. 資源使用
   - CPU < 30%
   - 內存 < 200MB
   - 磁盤 < 100MB
   - GPU < 20%

3. 穩定性
   - 崩潰率 < 0.1%
   - 識別準確率 > 95%
   - 點擊成功率 > 99%
   - 快捷鍵響應率 100%

## 自動化校驗要求
- PR/CI 流程需自動校驗：
  - 功能完整性測試
  - 性能指標測試
  - 穩定性測試
  - 兼容性測試
  - 主要文檔變更需自動生成變更日誌並通知團隊 