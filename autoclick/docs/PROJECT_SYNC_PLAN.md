# AutoClicker for macOS - é¡¹ç›®åŒæ­¥è§„èŒƒ

> ğŸ“ æœ¬æ–‡ä»¶éµå¾ª docs/ENVIRONMENT_CONFIG.md ä¸­çš„è§„èŒƒ
> ğŸ“… æœ€å¾Œä¿®æ”¹æ™‚é–“ï¼š2025-05-04 00:06

## ğŸ¯ åŒæ­¥ç›®æ ‡

### 1. å¼€å‘ç¯å¢ƒ
- ç»Ÿä¸€ Xcode å’Œ Cursor çš„é¡¹ç›®ç»“æ„
- é¿å…æ–‡ä»¶é‡å¤æˆ–ä¸¢å¤±
- ç¡®ä¿è‡ªåŠ¨åŒ–å·¥å…·æ­£å¸¸è¿è¡Œ
- æ”¯æŒæ–‡æ¡£è§„èŒƒä¸è‡ªåŠ¨åŒ–æ‰§è¡Œ
- ä¿æŒç›®å½•ç»“æ„ä¸€è‡´æ€§
- ç¡®ä¿æ–‡ä»¶è·¯å¾„æ­£ç¡®æ€§
- ç»´æŠ¤æµ‹è¯•æ¨¡å—å®Œæ•´æ€§
- æ”¯æŒå¤šè¯­è¨€å¼€å‘

### 2. ç›®å½•ç»“æ„
```
autoclick/
â”œâ”€â”€ AutoClicker/             # ä¸»ç¨‹åºç›®å½•
â”‚   â”œâ”€â”€ App/                 # AppDelegate èˆ‡ App å…¥å£é»
â”‚   â”‚   â”œâ”€â”€ AppDelegate.swift     # macOS App ä»£ç†
â”‚   â”‚   â””â”€â”€ AutoClickerApp.swift  # @main å…¥å£é»
â”‚   â”œâ”€â”€ Views/               # SwiftUI è¦–åœ–å…ƒä»¶æ¨¡çµ„
â”‚   â”‚   â”œâ”€â”€ MainView.swift       # ä¸»è¦–åœ–
â”‚   â”‚   â”œâ”€â”€ RecorderView.swift   # éŒ„è£½è¦–åœ–
â”‚   â”‚   â”œâ”€â”€ ImageMatchView.swift # åœ–åƒè­˜åˆ¥è¦–åœ–
â”‚   â”‚   â””â”€â”€ SettingsView.swift   # è¨­å®šè¦–åœ–
â”‚   â”œâ”€â”€ ViewModels/          # å°æ‡‰çš„é‚è¼¯æ§åˆ¶å±¤
â”‚   â”‚   â”œâ”€â”€ MainViewModel.swift  # ä¸»è¦–åœ–æ¨¡å‹
â”‚   â”‚   â”œâ”€â”€ RecorderViewModel.swift # éŒ„è£½è¦–åœ–æ¨¡å‹
â”‚   â”‚   â””â”€â”€ ImageMatchViewModel.swift # åœ–åƒè­˜åˆ¥è¦–åœ–æ¨¡å‹
â”‚   â”œâ”€â”€ Models/              # çµæ§‹å®šç¾©
â”‚   â”‚   â”œâ”€â”€ Script.swift         # è…³æœ¬æ¨¡å‹
â”‚   â”‚   â””â”€â”€ ScriptAction.swift   # è…³æœ¬å‹•ä½œæ¨¡å‹
â”‚   â”œâ”€â”€ Services/            # åŠŸèƒ½æ¨¡çµ„
â”‚   â”‚   â”œâ”€â”€ ScriptStorageService.swift # è…³æœ¬å­˜å„²æœå‹™
â”‚   â”‚   â”œâ”€â”€ ModernScreenCaptureService.swift # åœ–åƒè­˜åˆ¥æœå‹™ï¼ˆScreenCaptureKitï¼Œasync/awaitï¼Œç„¡ CGWindowListCreateImageï¼‰
â”‚   â”‚   â””â”€â”€ AccessibilityEventService.swift # è¼”åŠ©åŠŸèƒ½æœå‹™
â”‚   â”œâ”€â”€ Resources/           # è³‡æºæ–‡ä»¶
â”‚   â”‚   â””â”€â”€ Localizable.strings  # æœ¬åœ°åŒ–æ–‡ä»¶
â”‚   â”œâ”€â”€ Assets.xcassets/     # åœ–ç‰‡è³‡æº
â”‚   â”‚   â””â”€â”€ AppIcon.appiconset/  # App åœ–æ¨™
â”‚   â”œâ”€â”€ Info.plist           # æ‡‰ç”¨é…ç½®
â”‚   â””â”€â”€ README.md            # é …ç›®èªªæ˜
â”œâ”€â”€ AutoClickerTests/        # å–®å…ƒæ¸¬è©¦æ¨¡çµ„
â”œâ”€â”€ docs/                    # é–‹ç™¼æ–‡æª”
â”‚   â”œâ”€â”€ APPSTORE_NOTES.md    # App Store ä¸Šæ¶è¦ç¯„
â”‚   â”œâ”€â”€ CONTRIBUTING.md      # è²¢ç»æŒ‡å—
â”‚   â”œâ”€â”€ DATA_SCHEMA.md       # æ•¸æ“šæ¨¡å‹è¦ç¯„
â”‚   â”œâ”€â”€ FINAL_CHECKLIST.md   # æœ€çµ‚æª¢æŸ¥æ¸…å–®
â”‚   â”œâ”€â”€ IMAGE_RECOGNITION_RULES.md # åœ–åƒè­˜åˆ¥è¦ç¯„
â”‚   â”œâ”€â”€ LocalTestPlan.md     # æœ¬åœ°æ¸¬è©¦è¨ˆåŠƒ
â”‚   â”œâ”€â”€ NEXT_TASKS.md        # ä»»å‹™è¿½è¹¤
â”‚   â”œâ”€â”€ PROJECT_SYNC_PLAN.md # é …ç›®åŒæ­¥è¦ç¯„
â”‚   â”œâ”€â”€ QA_AUTOCHECK.md      # è‡ªå‹•åŒ–æ¸¬è©¦è¦ç¯„
â”‚   â”œâ”€â”€ SECURITY_POLICY.md   # å®‰å…¨ç­–ç•¥
â”‚   â”œâ”€â”€ SHORTCUTS.md         # å¿«æ·éµè¦ç¯„
â”‚   â”œâ”€â”€ SPEC.md              # åŠŸèƒ½è¦ç¯„
â”‚   â”œâ”€â”€ STYLE_GUIDE.md       # ä»£ç¢¼é¢¨æ ¼æŒ‡å—
â”‚   â”œâ”€â”€ UI_GUIDELINES.md     # UI è¨­è¨ˆæŒ‡å—
â”‚   â””â”€â”€ UI_TESTS_PLAN.md     # UI æ¸¬è©¦è¨ˆåŠƒ
â”œâ”€â”€ Tools/                   # é–‹ç™¼å·¥å…·è…³æœ¬
â”œâ”€â”€ scripts/                 # è‡ªå‹•åŒ–è…³æœ¬
â”œâ”€â”€ .github/                 # GitHub é…ç½®
â”œâ”€â”€ .cursorrules            # Cursor è¦å‰‡
â”œâ”€â”€ .swiftlint.yml          # SwiftLint é…ç½®
â”œâ”€â”€ Package.swift           # Swift Package Manager é…ç½®
â””â”€â”€ PROMPT_CHEATSHEET.md    # æç¤ºè©åƒè€ƒ
```

## ğŸ”„ åŒæ­¥æ¡ä»¶æ£€æŸ¥

### 1. æ–‡ä»¶æ£€æŸ¥
| é¡¹ç›® | æ£€æŸ¥æ–¹æ³• | è¯´æ˜ | è‡ªåŠ¨ä¿®å¤ |
|------|----------|------|----------|
| æ–‡ä»¶å®ä½“å­˜åœ¨ | `tree -L 2` | ç¡®è®¤æ–‡ä»¶å¤¹ä¸æ–‡ä»¶åœ¨æ­£ç¡®ä½ç½® | è‡ªåŠ¨åˆ›å»ºç¼ºå¤±ç›®å½• |
| åŠ å…¥ Xcode é¡¹ç›® | Project Navigator | æ£€æŸ¥æ˜¯å¦å·²åŠ å…¥æ–‡ä»¶å¤¹ä¸æ–‡ä»¶ | è‡ªåŠ¨æ·»åŠ æ–‡ä»¶ |
| ä½¿ç”¨ folder reference | Add Files æ—¶å‹¾é€‰ | å¿…é¡»å‹¾é€‰ "Create folder references" | è‡ªåŠ¨è®¾ç½®å¼•ç”¨ |
| åŠ å…¥æ­£ç¡® target | File Inspector | Target Membership ä¸­å‹¾é€‰æ­£ç¡® | è‡ªåŠ¨è®¾ç½® target |
| é¿å…è™šæ‹Ÿ group | ä½¿ç”¨ folder reference | é»„è‰²æ–‡ä»¶å¤¹æ˜“å¯¼è‡´ Cursor æ‰¾ä¸åˆ°æ–‡ä»¶ | è‡ªåŠ¨è½¬æ¢å¼•ç”¨ |
| é¿å…å¤šå±‚åŒ…è£¹ | æ£€æŸ¥ç›®å½•ç»“æ„ | ä¸åº”å­˜åœ¨ AutoClicker/AutoClicker/... | è‡ªåŠ¨ä¿®å¤è·¯å¾„ |

### 2. æµ‹è¯•æ¨¡å—
| ç›®å½• | ç”¨é€” | å»ºç«‹æ–¹å¼ | è‡ªåŠ¨æ£€æŸ¥ |
|------|------|----------|----------|
| AutoClickerTests/ | å•å…ƒæµ‹è¯•ï¼ˆXCTestï¼‰ | ç”± Xcode è‡ªåŠ¨äº§ç”Ÿ | æ£€æŸ¥æµ‹è¯•è¦†ç›–ç‡ |
| AutoClickerUITests/ | UI æµ‹è¯•ï¼ˆXCTest + XCUITestï¼‰ | ç”± Xcode è‡ªåŠ¨äº§ç”Ÿ | æ£€æŸ¥ UI æµ‹è¯•å®Œæ•´æ€§ |

> âš ï¸ æ³¨æ„ï¼šè¯·å‹¿æ‰‹åŠ¨å»ºç«‹ /Tests/ æˆ–æ”¾å…¥ä¸»è¦é€»è¾‘æ–‡ä»¶åˆ°æµ‹è¯•ç›®å½•ä¸­ã€‚æµ‹è¯•æ¨¡å—ä¸ä¸»ç¨‹åºé€»è¾‘åˆ†ç¦»ç®¡ç†ã€‚
> ğŸ“… æœ€å¾Œä¿®æ”¹æ™‚é–“ï¼š2025-05-04 00:06

## ğŸ“… å®šæœŸæ£€æŸ¥

### 1. æ¯å‘¨æ£€æŸ¥
| é¡¹ç›® | é¢‘ç‡ | æ£€æŸ¥æ–¹æ³• | è‡ªåŠ¨ä¿®å¤ |
|------|------|----------|----------|
| .xcodeproj ç»“æ„ | æ¯å‘¨ä¸€ | å¯¹ç…§ç›®å½•æ ‘æ£€æŸ¥ | è‡ªåŠ¨åŒæ­¥ç»“æ„ |
| .md æ–‡ä»¶å¯¹åº” | æ–°åŠŸèƒ½å¼€å‘å‰ | æ£€æŸ¥æ–‡æ¡£ä¸ä»£ç ä¸€è‡´æ€§ | è‡ªåŠ¨æ›´æ–°æ–‡æ¡£ |
| Target Membership | æ–°å¢æ–‡ä»¶å | ç«‹å³æ£€æŸ¥å‹¾é€‰çŠ¶æ€ | è‡ªåŠ¨è®¾ç½®æˆå‘˜ |
| å¤šå±‚æ–‡ä»¶å¤¹åŒ…è£¹ | æ–°å¢é¡¹ç›®æ—¶ | æ¸…æŸ¥ç›®å½•ç»“æ„ | è‡ªåŠ¨ä¿®å¤è·¯å¾„ |

### 2. å¼€å‘å‚è€ƒæ–‡æ¡£
è¯·æ‰€æœ‰ .swift æ–‡ä»¶ä¸æ¨¡å—é€»è¾‘ã€ç”»é¢ã€æµ‹è¯•å¯¹åº”ä»¥ä¸‹æ–‡æ¡£è¿›è¡ŒéªŒè¯ä¸äº§å‡ºï¼š
- `docs/SPEC.md` - åŠŸèƒ½è§„èŒƒ
- `docs/UI_GUIDELINES.md` - UI è®¾è®¡æŒ‡å—
- `docs/QA_AUTOCHECK.md` - è‡ªåŠ¨åŒ–æµ‹è¯•è§„èŒƒ
- `docs/SHORTCUTS.md` - å¿«æ·é”®è§„èŒƒ
- `docs/DATA_SCHEMA.md` - æ•°æ®æ¨¡å‹è§„èŒƒ
- `docs/IMAGE_RECOGNITION_RULES.md` - å›¾åƒè¯†åˆ«è§„èŒƒ
- `docs/APPSTORE_NOTES.md` - App Store ä¸Šæ¶è§„èŒƒ
- `docs/PROJECT_SYNC_PLAN.md` - é¡¹ç›®åŒæ­¥è§„èŒƒï¼ˆæœ¬æ–‡ä»¶ï¼‰

## ğŸ”— äº¤å‰å¼•ç”¨å£°æ˜

- æœ¬æ–‡æ¡£éœ€ä¸ä»¥ä¸‹æ–‡æ¡£ä¿æŒä¸€è‡´æ€§ä¸è”åŠ¨ï¼š
  - `CONTRIBUTING.md`ï¼šå¼€å‘æµç¨‹éœ€ä¸åŒæ­¥è§„èŒƒè”åŠ¨
  - `STYLE_GUIDE.md`ï¼šæ–‡ä»¶ç»“æ„éœ€ä¸åŒæ­¥è§„èŒƒä¸€è‡´
  - `.cursorrules`ï¼šAI ç”Ÿæˆä»£ç éœ€ç¬¦åˆæœ¬è§„èŒƒ
  - `QA_AUTOCHECK.md`ï¼šè‡ªåŠ¨éªŒæ”¶è§„åˆ™éœ€ä¸åŒæ­¥è§„èŒƒè”åŠ¨
  - `UI_TESTS_PLAN.md`ï¼šUI æµ‹è¯•éœ€ä¸ç›®å½•ç»“æ„ä¸€è‡´

- å˜æ›´æœ¬æ–‡ä»¶æ—¶ï¼Œå»ºè®®è‡ªåŠ¨é€šçŸ¥ç›¸å…³æ–‡æ¡£ç»´æŠ¤è€…/è´Ÿè´£äººã€‚

## ğŸ¤– è‡ªåŠ¨åŒ–æ ¡éªŒè¦æ±‚

- PR/CI æµç¨‹éœ€è‡ªå‹•æ ¡é©—ï¼š
  - ç›®éŒ„çµæ§‹ã€æ–‡ä»¶è·¯å¾„ä¸æœ¬è§„èŒƒä¸€è‡´
  - ä¸»è¦æ–‡æ¡£å˜æ›´éœ€è‡ªåŠ¨ç”Ÿæˆå˜æ›´æ—¥å¿—å¹¶é€šçŸ¥å›¢é˜Ÿ
  - æµ‹è¯•æ¨¡å—å®Œæ•´æ€§æ£€æŸ¥
  - æ–‡ä»¶å¼•ç”¨å…³ç³»æ£€æŸ¥
  - æ–‡æ¡£ä¸€è‡´æ€§æ£€æŸ¥
  - æª¢æŸ¥æ‰€æœ‰ Service/Manager/å–®ä¾‹é¡åˆ¥ static let shared å±¬æ€§èˆ‡ class å®£å‘Šï¼Œä¸å¯åŠ ä¸Š @MainActor æˆ–ä»»ä½• actor éš”é›¢æ¨™è¨»ï¼Œåƒ…å…è¨±æ¨™è¨»æ–¼ methodã€‚

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0
- åˆå§‹åŒæ­¥è§„èŒƒ
- å®šä¹‰ç›®å½•ç»“æ„
- åˆ¶å®šæ£€æŸ¥æµç¨‹
- å®Œå–„æ–‡æ¡£å¼•ç”¨

### v1.1.0
- ä¼˜åŒ–æ£€æŸ¥æµç¨‹
- å®Œå–„æ–‡æ¡£ç»“æ„
- å¢åŠ è‡ªåŠ¨åŒ–æ”¯æŒ
- æå‡åŒæ­¥æ•ˆç‡

### v1.2.0
- å¢åŠ è‡ªåŠ¨ä¿®å¤åŠŸèƒ½
- å®Œå–„ç›®å½•ç»“æ„è¯´æ˜
- ä¼˜åŒ–æµ‹è¯•æ¨¡å—è§„èŒƒ
- å¢å¼ºè‡ªåŠ¨åŒ–æ ¡éªŒ

## ğŸ”š ç»“å°¾æç¤º

è‹¥ä½¿ç”¨ Cursor è‡ªåŠ¨å¼€å‘ï¼Œè¯·å°†æœ¬æ–‡ä»¶è½½å…¥é¡¹ç›®ä¸­ï¼Œå¹¶äº `.cursorrules` ä¸­å¼€å¤´è¯´æ˜å¼•ç”¨æœ¬è§„èŒƒï¼š

```markdown
> ğŸ“ æœ¬é¡¹ç›®çš„å¼€å‘ç»“æ„ä¸ç”Ÿæˆè§„åˆ™è¯·å‚ç…§ï¼šdocs/PROJECT_SYNC_PLAN.md
> ğŸ“… æœ€å¾Œä¿®æ”¹æ™‚é–“ï¼š2025-05-04 00:06
```

## ğŸ”„ è‡ªåŠ¨ä¿®å¤æµç¨‹

### 1. ç›®å½•ç»“æ„ä¿®å¤
```bash
# æ£€æŸ¥ç›®å½•ç»“æ„
tree -L 2

# è‡ªåŠ¨ä¿®å¤ç¼ºå¤±ç›®å½•
mkdir -p App Views ViewModels Models Services Assets.xcassets/AppIcon.appiconset docs

# è‡ªåŠ¨ä¿®å¤æ–‡ä»¶å¼•ç”¨
find . -type f -name "*.swift" -exec xcrun swiftformat {} \;
```

### 2. æµ‹è¯•æ¨¡å—ä¿®å¤
```bash
# æ£€æŸ¥æµ‹è¯•æ¨¡å—
xcodebuild test -scheme AutoClicker -destination 'platform=macOS'

# è‡ªåŠ¨ä¿®å¤æµ‹è¯•è¦†ç›–ç‡
xcrun xccov view --report --json AutoClicker.xcodeproj
```

### 3. æ–‡æ¡£åŒæ­¥ä¿®å¤
```bash
# æ£€æŸ¥æ–‡æ¡£ä¸€è‡´æ€§
find docs -name "*.md" -exec grep -l "PROJECT_SYNC_PLAN.md" {} \;

# è‡ªåŠ¨æ›´æ–°æ–‡æ¡£å¼•ç”¨
find . -type f -name "*.md" -exec sed -i '' 's/old_path/new_path/g' {} \;
```

### æ¨¡çµ„ç®¡ç†åŒæ­¥
- [ ] åŒæ­¥æ¨¡çµ„ç”ŸæˆåŠŸèƒ½
- [ ] åŒæ­¥æ¨¡çµ„æ“´å……åŠŸèƒ½
- [ ] åŒæ­¥æ¨¡çµ„åˆä½µåŠŸèƒ½
- [ ] åŒæ­¥è¦ç¯„æª¢æŸ¥åŠŸèƒ½ 